import mgr_plot_detrended
from statistics import mean
from plotly import graph_objects as go

database = "arraysave.db"
publish_dir = "publish"

test = [
    24.47,
    24.49,
    24.49,
    24.41,
    24.47,
    24.47,
    24.47,
    24.47,
    24.47,
    24.45,
    24.43,
    24.43,
    24.45,
    24.43,
    24.47,
    24.47,
    24.47,
    24.49,
    24.49,
    24.45,
    24.45,
    24.47,
    24.47,
    24.45,
    24.45,
    24.45,
    24.51,
    24.47,
    24.45,
    24.49,
    24.43,
    24.47,
    24.45,
    24.49,
    24.45,
    24.47,
    24.47,
    24.47,
    24.43,
    24.45,
    24.47,
    24.47,
    24.49,
    24.43,
    24.49,
    24.47,
    24.49,
    24.47,
    24.47,
    24.47,
    24.47,
    24.47,
    24.49,
    24.47,
    24.49,
    24.45,
    24.45,
    24.47,
    24.49,
    24.49,
    24.49,
    24.49,
    24.47,
    24.47,
    24.47,
    24.49,
    24.47,
    24.47,
    24.49,
    24.51,
    24.47,
    24.47,
    24.49,
    24.49,
    24.47,
    24.47,
    24.51,
    24.49,
    24.49,
    24.49,
    24.49,
    24.47,
    24.49,
    24.49,
    24.51,
    24.47,
    24.43,
    24.47,
    24.43,
    24.49,
    24.47,
    24.47,
    24.45,
    24.45,
    24.45,
    24.43,
    24.47,
    24.47,
    24.45,
    24.43,
    24.47,
    24.45,
    24.47,
    24.49,
    24.45,
    24.49,
    24.49,
    24.49,
    24.47,
    24.47,
    24.47,
    24.49,
    24.49,
    24.49,
    24.45,
    24.47,
    24.49,
    24.49,
    24.49,
    24.47,
    24.49,
    24.49,
    24.47,
    24.49,
    24.45,
    24.47,
    24.45,
    24.47,
    24.45,
    24.47,
    24.49,
    24.47,
    24.47,
    24.47,
    24.49,
    24.45,
    24.49,
    24.47,
    24.51,
    24.47,
    24.49,
    24.45,
    24.47,
    24.47,
    24.47,
    24.47,
    24.49,
    24.43,
    24.49,
    24.49,
    24.47,
    24.47,
    24.47,
    24.43,
    24.45,
    24.45,
    24.43,
    24.47,
    24.47,
    24.47,
    24.45,
    24.47,
    24.49,
    24.45,
    24.45,
    24.45,
    24.45,
    24.47,
    24.47,
    24.47,
    24.47,
    24.47,
    24.47,
    24.47,
    24.47,
    24.45,
    24.45,
    24.45,
    24.43,
    24.47,
    24.49,
    24.47,
    24.47,
    24.45,
    24.47,
    24.49,
    24.47,
    24.49,
    24.45,
    24.45,
    24.43,
    24.45,
    24.47,
    24.49,
    24.47,
    24.43,
    24.49,
    24.47,
    24.45,
    24.47,
    24.47,
    24.47,
    24.47,
    24.47,
    24.45,
    24.47,
    24.47,
    24.47,
    24.49,
    24.49,
    24.45,
    24.49,
    24.45,
    24.47,
    24.45,
    24.47,
    24.45,
    24.45,
    24.45,
    24.49,
    24.47,
    24.45,
    24.45,
    24.47,
    24.45,
    24.45,
    24.47,
    24.43,
    24.45,
    24.45,
    24.49,
    24.47,
    24.45,
    24.45,
    24.45,
    24.45,
    24.45,
    24.47,
    24.47,
    24.45,
    24.43,
    24.47,
    24.45,
    24.47,
    24.47,
    24.47,
    24.45,
    24.47,
    24.45,
    24.49,
    24.47,
    24.45,
    24.49,
    24.47,
    24.45,
    24.45,
    24.45,
    24.49,
    24.45,
    24.47,
    24.47,
    24.45,
    24.49,
    24.49,
    24.49,
    24.53,
    24.49,
    24.47,
    24.45,
    24.49,
    24.47,
    24.47,
    24.47,
    24.47,
    24.47,
    24.47,
    24.45,
    24.47,
    24.47,
    24.47,
    24.47,
    24.47,
    24.43,
    24.47,
    24.45,
    24.47,
    24.49,
    24.47,
    24.45,
    24.49,
    24.45,
    24.47,
    24.51,
    24.49,
    24.45,
    24.45,
    24.47,
    24.45,
    24.43,
    24.43,
    24.47,
    24.43,
    24.47,
    24.47,
    24.47,
    24.45,
    24.49,
    24.49,
    24.49,
    24.49,
    24.49,
    24.47,
    24.47,
    24.47,
    24.49,
    24.49,
    24.47,
    24.49,
    24.49,
    24.51,
    24.47,
    24.49,
    24.45,
    24.47,
    24.49,
    24.49,
    24.47,
    24.51,
    24.47,
    24.49,
    24.49,
    24.51,
    24.47,
    24.49,
    24.49,
    24.47,
    24.45,
    24.45,
    24.49,
    24.49,
    24.47,
    24.49,
    24.47,
    24.51,
    24.49,
    24.49,
    24.49,
    24.49,
    24.49,
    24.51,
    24.49,
    24.53,
    24.51,
    24.49,
    24.53,
    24.49,
    24.51,
    24.47,
    24.47,
    24.53,
    24.47,
    24.49,
    24.49,
    24.49,
    24.51,
    24.49,
    24.47,
    24.51,
    24.49,
    24.49,
    24.49,
    24.51,
    24.51,
    24.47,
    24.51,
    24.51,
    24.51,
    24.51,
    24.47,
    24.51,
    24.49,
    24.49,
    24.49,
    24.49,
    24.49,
    24.49,
    24.47,
    24.47,
    24.49,
    24.49,
    24.47,
    24.49,
    24.45,
    24.51,
    24.51,
    24.51,
    24.49,
    24.53,
    24.51,
    24.49,
    24.47,
    24.53,
    24.49,
    24.49,
    24.47,
    24.47,
    24.53,
    24.49,
    24.47,
    24.49,
    24.47,
    24.49,
    24.49,
    24.49,
    24.49,
    24.53,
    24.47,
    24.49,
    24.53,
    24.49,
    24.47,
    24.49,
    24.47,
    24.51,
    24.49,
    24.51,
    24.49,
    24.47,
    24.53,
    24.51,
    24.53,
    24.47,
    24.51,
    24.51,
    24.47,
    24.51,
    24.49,
    24.51,
    24.49,
    24.51,
    24.51,
    24.53,
    24.51,
    24.51,
    24.51,
    24.51,
    24.47,
    24.51,
    24.49,
    24.49,
    24.51,
    24.49,
    24.49,
    24.53,
    24.49,
    24.49,
    24.51,
    24.51,
    24.51,
    24.49,
    24.49,
    24.51,
    24.51,
    24.51,
    24.49,
    24.49,
    24.49,
    24.47,
    24.51,
    24.51,
    24.51,
    24.51,
    24.51,
    24.47,
    24.49,
    24.49,
    24.47,
    24.51,
    24.49,
    24.47,
    24.47,
    24.49,
    24.49,
    24.47,
    24.47,
    24.51,
    24.47,
    24.49,
    24.51,
    24.49,
    24.47,
    24.47,
    24.45,
    24.47,
    24.51,
    24.51,
    24.47,
    24.45,
    24.47,
    24.45,
    24.47,
    24.47,
    24.49,
    24.49,
    24.47,
    24.49,
    24.47,
    24.49,
    24.47,
    24.47,
    24.49,
    24.51,
    24.45,
    24.49,
    24.49,
    24.51,
    24.49,
    24.49,
    24.51,
    24.51,
    24.51,
    24.49,
    24.53,
    24.45,
    24.49,
    24.51,
    24.49,
    24.45,
    24.53,
    24.51,
    24.49,
    24.53,
    24.51,
    24.49,
    24.45,
    24.49,
    24.49,
    24.53,
    24.51,
    24.49,
    24.47,
    24.49,
    24.49,
    24.49,
    24.49,
    24.49,
    24.47,
    24.47,
    24.49,
    24.47,
    24.53,
    24.51,
    24.53,
    24.49,
    24.51,
    24.49,
    24.49,
    24.49,
    24.51,
    24.51,
    24.51,
    24.47,
    24.49,
    24.49,
    24.47,
    24.51,
    24.53,
    24.49,
    24.51,
    24.51,
    24.49,
    24.49,
    24.53,
    24.51,
    24.51,
    24.51,
    24.51,
    24.53,
    24.51,
    24.51,
    24.51,
    24.53,
    24.53,
    24.51,
    24.51,
    24.53,
    24.53,
    24.53,
    24.53,
    24.51,
    24.53,
    24.57,
    24.53,
    24.53,
    24.53,
    24.51,
    24.57,
    24.51,
    24.53,
    24.51,
    24.51,
    24.53,
    24.51,
    24.53,
    24.57,
    24.51,
    24.57,
    24.49,
    24.53,
    24.49,
    24.51,
    24.57,
    24.51,
    24.51,
    24.53,
    24.53,
    24.51,
    24.53,
    24.53,
    24.57,
    24.53,
    24.53,
    24.57,
    24.57,
    24.53,
    24.51,
    24.51,
    24.53,
    24.53,
    24.51,
    24.53,
    24.53,
    24.51,
    24.53,
    24.57,
    24.57,
    24.59,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.61,
    24.59,
    24.53,
    24.53,
    24.57,
    24.53,
    24.59,
    24.53,
    24.59,
    24.51,
    24.59,
    24.59,
    24.53,
    24.57,
    24.59,
    24.57,
    24.59,
    24.51,
    24.57,
    24.61,
    24.57,
    24.57,
    24.57,
    24.57,
    24.59,
    24.61,
    24.61,
    24.57,
    24.57,
    24.59,
    24.59,
    24.59,
    24.53,
    24.51,
    24.53,
    24.51,
    24.53,
    24.57,
    24.59,
    24.53,
    24.53,
    24.53,
    24.57,
    24.59,
    24.57,
    24.53,
    24.57,
    24.53,
    24.57,
    24.57,
    24.49,
    24.53,
    24.59,
    24.53,
    24.53,
    24.53,
    24.53,
    24.53,
    24.53,
    24.53,
    24.57,
    24.53,
    24.59,
    24.53,
    24.51,
    24.53,
    24.57,
    24.53,
    24.53,
    24.51,
    24.51,
    24.53,
    24.51,
    24.53,
    24.53,
    24.57,
    24.53,
    24.57,
    24.51,
    24.51,
    24.53,
    24.53,
    24.57,
    24.53,
    24.53,
    24.53,
    24.57,
    24.57,
    24.57,
    24.59,
    24.53,
    24.57,
    24.53,
    24.53,
    24.57,
    24.57,
    24.57,
    24.59,
    24.57,
    24.57,
    24.51,
    24.53,
    24.51,
    24.57,
    24.57,
    24.53,
    24.49,
    24.57,
    24.49,
    24.51,
    24.49,
    24.51,
    24.51,
    24.51,
    24.51,
    24.53,
    24.57,
    24.51,
    24.49,
    24.57,
    24.49,
    24.51,
    24.51,
    24.49,
    24.51,
    24.53,
    24.49,
    24.49,
    24.49,
    24.51,
    24.49,
    24.51,
    24.51,
    24.51,
    24.51,
    24.51,
    24.51,
    24.51,
    24.49,
    24.49,
    24.49,
    24.53,
    24.53,
    24.53,
    24.53,
    24.49,
    24.51,
    24.47,
    24.51,
    24.53,
    24.57,
    24.51,
    24.53,
    24.51,
    24.53,
    24.53,
    24.53,
    24.57,
    24.51,
    24.49,
    24.51,
    24.49,
    24.53,
    24.49,
    24.51,
    24.57,
    24.53,
    24.53,
    24.57,
    24.49,
    24.51,
    24.53,
    24.59,
    24.53,
    24.57,
    24.57,
    24.57,
    24.53,
    24.51,
    24.51,
    24.47,
    24.51,
    24.53,
    24.57,
    24.59,
    24.53,
    24.59,
    24.59,
    24.53,
    24.57,
    24.53,
    24.57,
    24.59,
    24.53,
    24.59,
    24.61,
    24.61,
    24.57,
    24.59,
    24.59,
    24.61,
    24.57,
    24.61,
    24.57,
    24.59,
    24.53,
    24.59,
    24.61,
    24.61,
    24.61,
    24.59,
    24.57,
    24.61,
    24.57,
    24.57,
    24.57,
    24.59,
    24.59,
    24.57,
    24.59,
    24.59,
    24.57,
    24.53,
    24.61,
    24.61,
    24.59,
    24.59,
    24.59,
    24.59,
    24.61,
    24.61,
    24.63,
    24.61,
    24.57,
    24.57,
    24.63,
    24.59,
    24.59,
    24.59,
    24.57,
    24.59,
    24.59,
    24.59,
    24.53,
    24.57,
    24.53,
    24.57,
    24.53,
    24.57,
    24.59,
    24.57,
    24.59,
    24.57,
    24.59,
    24.63,
    24.57,
    24.59,
    24.59,
    24.57,
    24.51,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.51,
    24.57,
    24.51,
    24.53,
    24.57,
    24.57,
    24.53,
    24.51,
    24.61,
    24.53,
    24.57,
    24.53,
    24.53,
    24.53,
    24.57,
    24.57,
    24.53,
    24.49,
    24.53,
    24.53,
    24.59,
    24.57,
    24.59,
    24.53,
    24.57,
    24.51,
    24.57,
    24.57,
    24.49,
    24.53,
    24.53,
    24.51,
    24.53,
    24.53,
    24.51,
    24.53,
    24.51,
    24.53,
    24.53,
    24.53,
    24.51,
    24.59,
    24.57,
    24.59,
    24.57,
    24.53,
    24.53,
    24.57,
    24.51,
    24.57,
    24.53,
    24.51,
    24.53,
    24.57,
    24.57,
    24.51,
    24.53,
    24.57,
    24.51,
    24.59,
    24.57,
    24.51,
    24.51,
    24.51,
    24.57,
    24.51,
    24.57,
    24.57,
    24.53,
    24.57,
    24.57,
    24.53,
    24.51,
    24.53,
    24.53,
    24.53,
    24.51,
    24.51,
    24.57,
    24.59,
    24.53,
    24.51,
    24.59,
    24.59,
    24.59,
    24.59,
    24.51,
    24.53,
    24.53,
    24.57,
    24.53,
    24.57,
    24.61,
    24.53,
    24.57,
    24.53,
    24.57,
    24.53,
    24.59,
    24.59,
    24.59,
    24.53,
    24.53,
    24.53,
    24.57,
    24.53,
    24.57,
    24.53,
    24.53,
    24.53,
    24.53,
    24.57,
    24.53,
    24.59,
    24.57,
    24.53,
    24.57,
    24.57,
    24.59,
    24.53,
    24.51,
    24.57,
    24.57,
    24.59,
    24.49,
    24.57,
    24.57,
    24.53,
    24.57,
    24.57,
    24.57,
    24.57,
    24.53,
    24.57,
    24.53,
    24.53,
    24.53,
    24.57,
    24.53,
    24.57,
    24.59,
    24.51,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.53,
    24.53,
    24.53,
    24.57,
    24.53,
    24.53,
    24.53,
    24.53,
    24.53,
    24.53,
    24.57,
    24.51,
    24.53,
    24.59,
    24.53,
    24.53,
    24.53,
    24.51,
    24.53,
    24.53,
    24.51,
    24.47,
    24.57,
    24.51,
    24.53,
    24.53,
    24.51,
    24.53,
    24.51,
    24.51,
    24.53,
    24.53,
    24.53,
    24.53,
    24.49,
    24.53,
    24.57,
    24.59,
    24.49,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.51,
    24.53,
    24.59,
    24.59,
    24.57,
    24.61,
    24.59,
    24.61,
    24.59,
    24.59,
    24.53,
    24.57,
    24.59,
    24.53,
    24.57,
    24.53,
    24.53,
    24.51,
    24.51,
    24.57,
    24.51,
    24.59,
    24.53,
    24.53,
    24.59,
    24.57,
    24.49,
    24.51,
    24.53,
    24.53,
    24.49,
    24.51,
    24.53,
    24.49,
    24.57,
    24.57,
    24.53,
    24.51,
    24.53,
    24.49,
    24.57,
    24.51,
    24.53,
    24.53,
    24.53,
    24.57,
    24.53,
    24.53,
    24.57,
    24.57,
    24.53,
    24.53,
    24.51,
    24.53,
    24.53,
    24.57,
    24.57,
    24.53,
    24.53,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.53,
    24.57,
    24.57,
    24.57,
    24.57,
    24.61,
    24.57,
    24.61,
    24.57,
    24.59,
    24.57,
    24.57,
    24.57,
    24.59,
    24.63,
    24.61,
    24.57,
    24.59,
    24.61,
    24.59,
    24.59,
    24.53,
    24.59,
    24.61,
    24.57,
    24.53,
    24.57,
    24.57,
    24.57,
    24.53,
    24.59,
    24.53,
    24.59,
    24.61,
    24.61,
    24.59,
    24.57,
    24.57,
    24.59,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.61,
    24.57,
    24.57,
    24.59,
    24.59,
    24.61,
    24.53,
    24.57,
    24.57,
    24.57,
    24.59,
    24.61,
    24.57,
    24.51,
    24.53,
    24.57,
    24.53,
    24.57,
    24.59,
    24.59,
    24.57,
    24.57,
    24.53,
    24.51,
    24.57,
    24.61,
    24.59,
    24.53,
    24.57,
    24.57,
    24.57,
    24.57,
    24.53,
    24.53,
    24.57,
    24.57,
    24.53,
    24.57,
    24.53,
    24.59,
    24.57,
    24.59,
    24.57,
    24.57,
    24.57,
    24.53,
    24.53,
    24.61,
    24.57,
    24.57,
    24.53,
    24.53,
    24.59,
    24.59,
    24.59,
    24.53,
    24.57,
    24.59,
    24.59,
    24.53,
    24.57,
    24.57,
    24.57,
    24.61,
    24.59,
    24.57,
    24.59,
    24.57,
    24.53,
    24.61,
    24.61,
    24.61,
    24.61,
    24.59,
    24.57,
    24.53,
    24.59,
    24.51,
    24.57,
    24.59,
    24.57,
    24.53,
    24.57,
    24.59,
    24.57,
    24.59,
    24.59,
    24.53,
    24.59,
    24.57,
    24.61,
    24.59,
    24.59,
    24.59,
    24.57,
    24.59,
    24.61,
    24.59,
    24.59,
    24.59,
    24.59,
    24.61,
    24.59,
    24.61,
    24.61,
    24.61,
    24.63,
    24.59,
    24.59,
    24.61,
    24.63,
    24.61,
    24.65,
    24.63,
    24.61,
    24.63,
    24.61,
    24.63,
    24.61,
    24.59,
    24.59,
    24.65,
    24.61,
    24.63,
    24.61,
    24.63,
    24.63,
    24.57,
    24.63,
    24.59,
    24.63,
    24.59,
    24.59,
    24.59,
    24.63,
    24.59,
    24.61,
    24.63,
    24.63,
    24.61,
    24.57,
    24.57,
    24.61,
    24.63,
    24.57,
    24.61,
    24.63,
    24.59,
    24.59,
    24.61,
    24.61,
    24.61,
    24.59,
    24.61,
    24.61,
    24.61,
    24.61,
    24.61,
    24.59,
    24.57,
    24.57,
    24.65,
    24.59,
    24.61,
    24.61,
    24.57,
    24.57,
    24.61,
    24.61,
    24.59,
    24.61,
    24.57,
    24.59,
    24.59,
    24.61,
    24.63,
    24.61,
    24.57,
    24.63,
    24.59,
    24.65,
    24.61,
    24.61,
    24.63,
    24.67,
    24.63,
    24.65,
    24.65,
    24.67,
    24.61,
    24.61,
    24.61,
    24.63,
    24.63,
    24.61,
    24.61,
    24.65,
    24.65,
    24.61,
    24.63,
    24.61,
    24.59,
    24.65,
    24.61,
    24.63,
    24.59,
    24.61,
    24.63,
    24.63,
    24.61,
    24.61,
    24.61,
    24.61,
    24.63,
    24.59,
    24.59,
    24.61,
    24.65,
    24.59,
    24.61,
    24.59,
    24.63,
    24.63,
    24.59,
    24.63,
    24.61,
    24.63,
    24.61,
    24.61,
    24.61,
    24.65,
    24.63,
    24.59,
    24.63,
    24.63,
    24.65,
    24.67,
    24.67,
    24.67,
    24.67,
    24.63,
    24.65,
    24.69,
    24.63,
    24.67,
    24.73,
    24.67,
    24.63,
    24.65,
    24.67,
    24.63,
    24.65,
    24.67,
    24.67,
    24.65,
    24.61,
    24.63,
    24.65,
    24.69,
    24.65,
    24.63,
    24.65,
    24.63,
    24.67,
    24.63,
    24.63,
    24.65,
    24.65,
    24.63,
    24.65,
    24.65,
    24.63,
    24.67,
    24.63,
    24.65,
    24.59,
    24.61,
    24.63,
    24.67,
    24.65,
    24.63,
    24.67,
    24.65,
    24.67,
    24.65,
    24.65,
    24.65,
    24.65,
    24.65,
    24.63,
    24.63,
    24.61,
    24.65,
    24.67,
    24.65,
    24.63,
    24.65,
    24.65,
    24.63,
    24.63,
    24.63,
    24.63,
    24.63,
    24.61,
    24.65,
    24.63,
    24.61,
    24.63,
    24.65,
    24.63,
    24.63,
    24.61,
    24.63,
    24.63,
    24.65,
    24.61,
    24.69,
    24.63,
    24.61,
    24.63,
    24.63,
    24.63,
    24.61,
    24.63,
    24.61,
    24.63,
    24.63,
    24.63,
    24.59,
    24.59,
    24.63,
    24.63,
    24.65,
    24.59,
    24.65,
    24.63,
    24.63,
    24.63,
    24.63,
    24.61,
    24.65,
    24.61,
    24.63,
    24.61,
    24.59,
    24.61,
    24.61,
    24.61,
    24.57,
    24.59,
    24.61,
    24.59,
    24.59,
    24.59,
    24.59,
    24.59,
    24.61,
    24.61,
    24.59,
    24.59,
    24.59,
    24.59,
    24.61,
    24.61,
    24.63,
    24.61,
    24.61,
    24.61,
    24.65,
    24.59,
    24.61,
    24.63,
    24.63,
    24.61,
    24.61,
    24.63,
    24.59,
    24.67,
    24.65,
    24.65,
    24.63,
    24.65,
    24.61,
    24.63,
    24.63,
    24.65,
    24.67,
    24.63,
    24.67,
    24.61,
    24.65,
    24.63,
    24.65,
    24.63,
    24.63,
    24.65,
    24.63,
    24.65,
    24.65,
    24.65,
    24.65,
    24.69,
    24.69,
    24.65,
    24.65,
    24.63,
    24.65,
    24.67,
    24.61,
    24.65,
    24.65,
    24.63,
    24.61,
    24.61,
    24.65,
    24.63,
    24.61,
    24.63,
    24.63,
    24.63,
    24.63,
    24.65,
    24.67,
    24.63,
    24.63,
    24.61,
    24.63,
    24.63,
    24.69,
    24.63,
    24.65,
    24.67,
    24.63,
    24.63,
    24.61,
    24.63,
    24.65,
    24.65,
    24.65,
    24.67,
    24.65,
    24.67,
    24.65,
    24.63,
    24.67,
    24.65,
    24.65,
    24.63,
    24.67,
    24.61,
    24.63,
    24.67,
    24.65,
    24.67,
    24.61,
    24.61,
    24.63,
    24.65,
    24.63,
    24.67,
    24.65,
    24.63,
    24.65,
    24.65,
    24.61,
    24.63,
    24.59,
    24.65,
    24.67,
    24.59,
    24.63,
    24.63,
    24.65,
    24.65,
    24.61,
    24.63,
    24.65,
    24.67,
    24.63,
    24.59,
    24.63,
    24.61,
    24.63,
    24.65,
    24.63,
    24.63,
    24.63,
    24.65,
    24.63,
    24.63,
    24.63,
    24.63,
    24.63,
    24.67,
    24.61,
    24.63,
    24.67,
    24.65,
    24.63,
    24.65,
    24.65,
    24.63,
    24.61,
    24.63,
    24.65,
    24.65,
    24.65,
    24.63,
    24.67,
    24.65,
    24.67,
    24.65,
    24.65,
    24.65,
    24.63,
    24.61,
    24.67,
    24.63,
    24.67,
    24.63,
    24.65,
    24.61,
    24.67,
    24.61,
    24.63,
    24.65,
    24.65,
    24.63,
    24.67,
    24.67,
    24.67,
    24.63,
    24.65,
    24.61,
    24.65,
    24.67,
    24.65,
    24.63,
    24.63,
    24.65,
    24.67,
    24.63,
    24.63,
    24.63,
    24.65,
    24.63,
    24.65,
    24.65,
    24.63,
    24.63,
    24.65,
    24.63,
    24.67,
    24.65,
    24.65,
    24.63,
    24.61,
    24.63,
    24.65,
    24.65,
    24.65,
    24.63,
    24.63,
    24.65,
    24.63,
    24.63,
    24.65,
    24.61,
    24.65,
    24.61,
    24.63,
    24.63,
    24.63,
    24.63,
    24.63,
    24.59,
    24.63,
    24.59,
    24.61,
    24.61,
    24.61,
    24.61,
    24.67,
    24.63,
    24.61,
    24.63,
    24.61,
    24.63,
    24.65,
    24.61,
    24.65,
    24.59,
    24.65,
    24.61,
    24.65,
    24.65,
    24.61,
    24.59,
    24.63,
    24.63,
    24.65,
    24.61,
    24.61,
    24.63,
    24.61,
    24.63,
    24.65,
    24.59,
    24.63,
    24.65,
    24.63,
    24.65,
    24.65,
    24.63,
    24.63,
    24.61,
    24.61,
    24.63,
    24.61,
    24.61,
    24.65,
    24.63,
    24.63,
    24.63,
    24.63,
    24.61,
    24.65,
    24.61,
    24.63,
    24.65,
    24.63,
    24.59,
    24.65,
    24.61,
    24.65,
    24.65,
    24.61,
    24.65,
    24.63,
    24.65,
    24.63,
    24.65,
    24.61,
    24.67,
    24.63,
    24.59,
    24.61,
    24.65,
    24.61,
    24.61,
    24.65,
    24.65,
    24.65,
    24.63,
    24.61,
    24.61,
    24.63,
    24.63,
    24.63,
    24.63,
    24.61,
    24.63,
    24.61,
    24.61,
    24.61,
    24.63,
    24.63,
    24.61,
    24.61,
    24.57,
    24.61,
    24.63,
    24.59,
    24.63,
    24.59,
    24.61,
    24.61,
    24.59,
    24.61,
    24.63,
    24.61,
    24.61,
    24.63,
    24.65,
    24.65,
    24.61,
    24.61,
    24.63,
    24.61,
    24.65,
    24.59,
    24.59,
    24.65,
    24.61,
    24.61,
    24.59,
    24.59,
    24.61,
    24.63,
    24.63,
    24.63,
    24.63,
    24.63,
    24.63,
    24.65,
    24.65,
    24.63,
    24.61,
    24.59,
    24.65,
    24.61,
    24.61,
    24.59,
    24.65,
    24.63,
    24.65,
    24.61,
    24.63,
    24.57,
    24.61,
    24.57,
    24.61,
    24.61,
    24.61,
    24.61,
    24.59,
    24.63,
    24.61,
    24.61,
    24.57,
    24.61,
    24.61,
    24.63,
    24.63,
    24.65,
    24.63,
    24.63,
    24.59,
    24.59,
    24.65,
    24.59,
    24.61,
    24.65,
    24.65,
    24.63,
    24.63,
    24.63,
    24.63,
    24.63,
    24.65,
    24.61,
    24.61,
    24.63,
    24.63,
    24.63,
    24.61,
    24.59,
    24.61,
    24.63,
    24.65,
    24.63,
    24.63,
    24.63,
    24.65,
    24.65,
    24.61,
    24.67,
    24.63,
    24.65,
    24.65,
    24.67,
    24.65,
    24.65,
    24.65,
    24.63,
    24.63,
    24.61,
    24.65,
    24.63,
    24.67,
    24.65,
    24.63,
    24.61,
    24.59,
    24.63,
    24.65,
    24.61,
    24.63,
    24.59,
    24.61,
    24.63,
    24.63,
    24.59,
    24.61,
    24.63,
    24.59,
    24.63,
    24.61,
    24.59,
    24.63,
    24.65,
    24.61,
    24.63,
    24.61,
    24.63,
    24.63,
    24.61,
    24.63,
    24.61,
    24.65,
    24.61,
    24.63,
    24.61,
    24.59,
    24.59,
    24.57,
    24.59,
    24.57,
    24.61,
    24.57,
    24.61,
    24.57,
    24.61,
    24.63,
    24.63,
    24.59,
    24.61,
    24.61,
    24.63,
    24.63,
    24.61,
    24.65,
    24.63,
    24.59,
    24.59,
    24.61,
    24.63,
    24.61,
    24.59,
    24.61,
    24.59,
    24.61,
    24.59,
    24.59,
    24.59,
    24.63,
    24.61,
    24.63,
    24.53,
    24.53,
    24.59,
    24.61,
    24.61,
    24.59,
    24.61,
    24.61,
    24.65,
    24.57,
    24.61,
    24.53,
    24.63,
    24.61,
    24.61,
    24.59,
    24.61,
    24.61,
    24.57,
    24.61,
    24.65,
    24.61,
    24.61,
    24.61,
    24.59,
    24.57,
    24.61,
    24.61,
    24.59,
    24.59,
    24.59,
    24.59,
    24.53,
    24.59,
    24.59,
    24.53,
    24.59,
    24.59,
    24.59,
    24.57,
    24.57,
    24.61,
    24.59,
    24.53,
    24.57,
    24.53,
    24.61,
    24.49,
    24.57,
    24.57,
    24.63,
    24.57,
    24.61,
    24.59,
    24.61,
    24.61,
    24.53,
    24.57,
    24.57,
    24.59,
    24.59,
    24.59,
    24.59,
    24.59,
    24.59,
    24.59,
    24.53,
    24.61,
    24.57,
    24.59,
    24.59,
    24.53,
    24.57,
    24.59,
    24.59,
    24.61,
    24.59,
    24.59,
    24.57,
    24.59,
    24.57,
    24.59,
    24.59,
    24.59,
    24.61,
    24.59,
    24.59,
    24.59,
    24.57,
    24.57,
    24.59,
    24.59,
    24.57,
    24.59,
    24.61,
    24.59,
    24.61,
    24.61,
    24.61,
    24.59,
    24.59,
    24.57,
    24.59,
    24.59,
    24.59,
    24.59,
    24.61,
    24.61,
    24.59,
    24.61,
    24.63,
    24.57,
    24.61,
    24.57,
    24.59,
    24.61,
    24.59,
    24.63,
    24.59,
    24.57,
    24.59,
    24.57,
    24.57,
    24.59,
    24.57,
    24.57,
    24.59,
    24.57,
    24.59,
    24.59,
    24.57,
    24.59,
    24.59,
    24.57,
    24.53,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.59,
    24.57,
    24.53,
    24.59,
    24.59,
    24.57,
    24.57,
    24.59,
    24.63,
    24.59,
    24.59,
    24.53,
    24.57,
    24.57,
    24.57,
    24.61,
    24.59,
    24.59,
    24.57,
    24.59,
    24.57,
    24.59,
    24.59,
    24.57,
    24.57,
    24.57,
    24.57,
    24.57,
    24.59,
    24.53,
    24.59,
    24.53,
    24.57,
    24.59,
    24.61,
    24.63,
    24.53,
    24.59,
    24.57,
    24.57,
    24.57,
    24.53,
    24.53,
    24.57,
    24.53,
    24.57,
    24.57,
    24.57,
    24.59,
    24.59,
    24.59,
    24.59,
    24.61,
    24.59,
    24.53,
    24.59,
    24.53,
    24.59,
    24.51,
    24.53,
    24.59,
    24.59,
    24.59,
    24.59,
    24.57,
    24.57,
    24.59,
    24.61,
    24.57,
    24.59,
    24.61,
    24.57,
    24.53,
    24.59,
    24.59,
    24.57,
    24.59,
    24.59,
    24.53,
    24.53,
    24.57,
    24.59,
    24.59,
    24.57,
    24.57,
    24.57,
    24.57,
    24.53,
    24.57,
    24.57,
    24.57,
    24.53,
    24.57,
    24.57,
    24.53,
    24.53,
    24.57,
    24.59,
    24.57,
    24.51,
    24.53,
    24.53,
    24.59,
    24.57,
    24.57,
    24.57,
    24.59,
    24.57,
    24.51,
    24.53,
    24.57,
    24.59,
    24.53,
    24.53,
    24.61,
    24.59,
    24.57,
    24.53,
    24.53,
    24.53,
    24.53,
    24.53,
    24.59,
    24.51,
    24.51,
    24.53,
    24.53,
    24.51,
    24.51,
    24.57,
    24.57,
    24.53,
    24.51,
    24.51,
    24.57,
    24.53,
    24.57,
    24.53,
    24.57,
    24.53,
    24.53,
    24.57,
    24.57,
    24.53,
    24.53,
    24.53,
    24.57,
    24.53,
    24.53,
    24.51,
    24.47,
    24.57,
    24.57,
    24.51,
    24.51,
    24.53,
    24.53,
    24.49,
    24.51,
    24.57,
    24.53,
    24.49,
    24.49,
    24.49,
    24.47,
    24.51,
    24.47,
    24.51,
    24.49,
    24.47,
    24.49,
    24.49,
    24.49,
    24.51,
    24.49,
    24.53,
    24.53,
    24.47,
    24.49,
    24.53,
    24.49,
    24.53,
    24.49,
    24.49,
    24.53,
    24.49,
    24.51,
    24.49,
    24.49,
    24.47,
    24.49,
    24.49,
    24.49,
    24.51,
    24.47,
    24.47,
    24.49,
    24.51,
    24.53,
    24.49,
    24.49,
    24.49,
    24.47,
    24.47,
    24.51,
    24.51,
    24.51,
    24.49,
    24.51,
    24.49,
    24.51,
    24.49,
    24.59,
    24.49,
    24.51,
    24.51,
    24.51,
    24.57,
    24.53,
    24.57,
    24.53,
    24.53,
    24.51,
    24.51,
    24.59,
    24.49,
    24.53,
    24.57,
    24.51,
    24.59,
    24.59,
    24.53,
    24.47,
    24.57,
    24.53,
    24.59,
    24.49,
    24.51,
    24.53,
    24.57,
    24.57,
    24.53,
    24.51,
    24.57,
    24.53,
    24.51,
    24.57,
    24.57,
    24.51,
    24.57,
    24.53,
    24.59,
    24.51,
    24.57,
    24.49,
    24.53,
    24.53,
    24.51,
    24.53,
    24.51,
    24.51,
    24.53,
    24.51,
    24.53,
    24.51,
    24.57,
    24.57,
    24.53,
    24.53,
    24.53,
    24.53,
    24.53,
    24.51,
    24.53,
    24.51,
    24.53,
    24.53,
    24.49,
    24.53,
    24.53,
    24.51,
    24.53,
    24.51,
    24.53,
    24.57,
    24.59,
    24.59,
    24.51,
    24.53,
    24.57,
    24.49,
    24.51,
    24.49,
    24.53,
    24.49,
    24.51,
    24.51,
    24.51,
    24.51,
    24.51,
    24.49,
    24.53,
    24.49,
    24.51,
    24.49,
    24.49,
    24.53,
    24.53,
    24.49,
    24.51,
    24.53,
    24.57,
    24.53,
    24.53,
    24.53,
    24.53,
    24.53,
    24.53,
    24.57,
    24.57,
    24.53,
    24.53,
    24.57,
    24.57,
    24.53,
    24.57,
    24.51,
    24.51,
    24.57,
    24.59,
    24.53,
    24.57,
    24.57,
    24.59,
    24.53,
    24.53,
    24.51,
    24.53,
    24.57,
    24.53,
    24.53,
    24.53,
    24.57,
    24.53,
    24.53,
    24.53,
    24.53,
    24.51,
    24.59,
    24.57,
    24.59,
    24.57,
    24.53,
    24.57,
    24.61,
    24.59,
    24.53,
    24.53,
    24.57,
    24.59,
    24.59,
    24.61,
    24.57,
    24.57,
    24.57,
    24.53,
    24.57,
    24.57,
    24.59,
    24.61,
    24.57,
    24.61,
    24.57,
    24.61
]

half_window = int(30 * 60 * 1.5)

test = test + test + test + test + test + test + test + test + test + test + test

def calc_start(datalist):
    returnlist = []
    data_start = datalist[0]

    if len(datalist) > half_window:
        index = half_window - 1
    else:
        index = len(datalist) - 1

    print(index)
    data_end = datalist[index]
    rate = (data_end - data_start) / index
    d = data_start
    returnlist.append(data_start)

    for i in range(0, half_window - 1):
        d = d + rate
        returnlist.append(round(d, 3))
        # print(i, datalist[i], returnlist[i])
    return returnlist


def calc_end(datalist):
    returnlist = []
    data_start = datalist[len(datalist) - half_window]
    data_end = datalist[len(datalist) - 1]
    rate = (data_end - data_start) / half_window
    d = data_start
    returnlist.append(data_start)

    for i in range(len(datalist) - half_window, len(datalist) - 1):
        d = d + rate
        returnlist.append(round(d, 3))
    return returnlist


def calc_middle(datalist):
    returnlist = []
    t = []
    for i in range(half_window, len(datalist) - half_window):
        t.append(datalist[i])
        if len(t) >= half_window:
            t.pop(0)
            t.append(datalist[i])
            d = mean(t)
            returnlist.append(round(d, 3))
        # for j in range(0 - half_window, half_window):
        #     t.append(float(datalist[i + j]))
        #
        # if len(t) > 0:
        #     d = mean(t)
        # else:
        #     d = 0
        # returnlist.append(round(d,3))

    return returnlist


if len(test) < half_window:
    f = calc_start(test)
else:
    # Calculate the detrended data.
    a = calc_start(test)
    b = calc_middle(test)
    c = calc_end(test)
    f = a + b + c

dt_detrend = []
max_iters = min(len(f), len(test))
for i in range(0, max_iters):
    dd = float(test[i])
    ff = float(f[i])
    d = round((dd - ff), 3)
    dt_detrend.append(d)


width = 1500
height = 500
backgroundcolour = "#ffffff"
pencolour = "#600000"
gridcolour = "#909090"

plotdata = go.Scatter(y=dt_detrend, mode="lines", line=dict(color=pencolour, width=2))
fig = go.Figure(plotdata)
fig.update_layout(width=width, height=height, title="H-Component - Detrended",
                  xaxis_title="Date/time UTC<br><sub>http://RuruObservatory.org.nz</sub>",
                  yaxis_title="Magnetic Field Strength - Arbitrary Values")
fig.update_layout(plot_bgcolor=backgroundcolour, paper_bgcolor=backgroundcolour)
fig.update_xaxes(showgrid=True, gridwidth=1, gridcolor=gridcolour)
fig.update_yaxes(showgrid=True, gridwidth=1, gridcolor=gridcolour)

fig.show()